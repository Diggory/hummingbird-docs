{"metadata":{"images":[{"identifier":"logo.png","type":"icon"}],"title":"Router","roleHeading":"API Collection","role":"collectionGroup","modules":[{"name":"Hummingbird"}]},"kind":"article","schemaVersion":{"patch":0,"minor":3,"major":0},"abstract":[{"text":"The router directs requests to their handlers based on the contents of their path.","type":"text"}],"primaryContentSections":[{"kind":"content","content":[{"text":"Overview","anchor":"Overview","level":2,"type":"heading"},{"type":"paragraph","inlineContent":[{"text":"The default router that comes with Hummingbird uses a Trie based lookup. Routes are added using the function ","type":"text"},{"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/Router\/on(_:method:use:)","isActive":true,"type":"reference"},{"text":". You provide the URI path, the method and the handler function. Below is a simple route which returns “Hello” in the body of the response.","type":"text"}]},{"code":["let router = Router()","router.on(\"\/hello\", method: .GET) { request, context in","    return \"Hello\"","}"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"If you don’t provide a path then the default is for it to be “\/”."}]},{"type":"heading","text":"Methods","anchor":"Methods","level":3},{"inlineContent":[{"text":"There are shortcut functions for the most common HTTP methods. The above can be written as","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["let router = Router()","app.router.get(\"\/hello\") { request, context in","    return \"Hello\"","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"There are shortcuts for "},{"code":"put","type":"codeVoice"},{"type":"text","text":", "},{"code":"post","type":"codeVoice"},{"text":", ","type":"text"},{"code":"head","type":"codeVoice"},{"type":"text","text":", "},{"code":"patch","type":"codeVoice"},{"type":"text","text":" and "},{"code":"delete","type":"codeVoice"},{"text":" as well.","type":"text"}]},{"level":3,"text":"Response generators","anchor":"Response-generators","type":"heading"},{"inlineContent":[{"type":"text","text":"Route handlers are required to return a type conforming to the "},{"type":"codeVoice","code":"ResponseGenerator"},{"text":" protocol. The ","type":"text"},{"type":"codeVoice","code":"ResponseGenerator"},{"type":"text","text":" protocol requires a type to be able to generate an "},{"code":"Response","type":"codeVoice"},{"text":". For example ","type":"text"},{"type":"codeVoice","code":"String"},{"type":"text","text":" has been extended to conform to "},{"type":"codeVoice","code":"ResponseGenerator"},{"text":" by returning an ","type":"text"},{"type":"codeVoice","code":"Response"},{"type":"text","text":" with status "},{"type":"codeVoice","code":".ok"},{"type":"text","text":",  a content-type header of "},{"code":"text-plain","type":"codeVoice"},{"type":"text","text":" and a body holding the contents of the "},{"type":"codeVoice","code":"String"},{"type":"text","text":"."}],"type":"paragraph"},{"syntax":"swift","code":["\/\/\/ Extend String to conform to ResponseGenerator","extension String: ResponseGenerator {","    \/\/\/ Generate response holding string","    public func response(from request: Request, context: some RequestContext) -> Response {","        let buffer = context.allocator.buffer(string: self)","        return Response(status: .ok, headers: [\"content-type\": \"text\/plain; charset=utf-8\"], body: .byteBuffer(buffer))","    }","}"],"type":"codeListing"},{"type":"paragraph","inlineContent":[{"text":"In addition to ","type":"text"},{"type":"codeVoice","code":"String"},{"type":"text","text":" "},{"code":"ByteBuffer","type":"codeVoice"},{"type":"text","text":", "},{"code":"HTTPResponseStatus","type":"codeVoice"},{"type":"text","text":" and "},{"code":"Optional","type":"codeVoice"},{"text":" have also been extended to conform to ","type":"text"},{"type":"codeVoice","code":"ResponseGenerator"},{"type":"text","text":"."}]},{"inlineContent":[{"text":"It is also possible to extend ","type":"text"},{"code":"Codable","type":"codeVoice"},{"type":"text","text":" objects to generate "},{"type":"codeVoice","code":"Response"},{"text":" by conforming these objects to ","type":"text"},{"code":"ResponseEncodable","type":"codeVoice"},{"type":"text","text":". The object will use the response encoder attached to your context to encode these objects. If an object conforms to "},{"type":"codeVoice","code":"ResponseEncodable"},{"text":" then also so do arrays and dictionaries of these objects.","type":"text"}],"type":"paragraph"},{"level":3,"text":"Wildcards","anchor":"Wildcards","type":"heading"},{"inlineContent":[{"text":"You can use wildcards to match sections of a path component.","type":"text"}],"type":"paragraph"},{"inlineContent":[{"text":"A single ","type":"text"},{"type":"codeVoice","code":"*"},{"text":" will skip one path component","type":"text"}],"type":"paragraph"},{"syntax":"swift","code":["app.router.get(\"\/files\/*\") { request, context in","    return request.uri.description","}"],"type":"codeListing"},{"type":"paragraph","inlineContent":[{"text":"Will match","type":"text"}]},{"syntax":null,"code":["GET \/files\/test","GET \/files\/test2"],"type":"codeListing"},{"type":"paragraph","inlineContent":[{"text":"A ","type":"text"},{"type":"codeVoice","code":"*"},{"type":"text","text":" at the start of a route component will match all path components with the same suffix."}]},{"code":["app.router.get(\"\/files\/*.jpg\") { request, context in","    return request.uri.description","}"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"text":"Will work for","type":"text"}]},{"type":"codeListing","syntax":null,"code":["GET \/files\/test.jpg","GET \/files\/test2.jpg"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"A "},{"type":"codeVoice","code":"*"},{"text":" at the end of a route component will match all path components with the same prefix.","type":"text"}]},{"syntax":"swift","code":["app.router.get(\"\/files\/image.*\") { request, context in","    return request.uri.description","}"],"type":"codeListing"},{"inlineContent":[{"text":"Will work for","type":"text"}],"type":"paragraph"},{"syntax":null,"code":["GET \/files\/image.jpg","GET \/files\/image.png"],"type":"codeListing"},{"type":"paragraph","inlineContent":[{"type":"text","text":"A "},{"code":"**","type":"codeVoice"},{"type":"text","text":" will match and capture all remaining path components."}]},{"syntax":"swift","code":["app.router.get(\"\/files\/**\") { request, context in","    \/\/ return catchAll captured string","    return context.parameters.getCatchAll().joined(separator: \"\/\")","}"],"type":"codeListing"},{"inlineContent":[{"type":"text","text":"The above will match routes and respond as follows"}],"type":"paragraph"},{"syntax":null,"code":["GET \/files\/image.jpg returns \"image.jpg\" in the response body","GET \/files\/folder\/image.png returns \"folder\/image.png\" in the response body"],"type":"codeListing"},{"text":"Parameter Capture","level":3,"type":"heading","anchor":"Parameter-Capture"},{"inlineContent":[{"type":"text","text":"You can extract parameters out of the URI by prefixing the path with a colon. This indicates that this path section is a parameter. The parameter name is the string following the colon. You can get access to the URI extracted parameters from the context. This example extracts an id from the URI and uses it to return a specific user. so “\/user\/56” will return user with id 56."}],"type":"paragraph"},{"type":"codeListing","syntax":"swift","code":["app.router.get(\"\/user\/:id\") { request, context in","    let id = context.parameters.get(\"id\", as: Int.self) else { throw HTTPError(.badRequest) }","    return getUser(id: id)","}"]},{"inlineContent":[{"type":"text","text":"In the example above if I fail to access the parameter as an "},{"type":"codeVoice","code":"Int"},{"text":" then I throw an error. If you throw an ","type":"text"},{"type":"reference","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/HTTPError","isActive":true},{"type":"text","text":" it will get converted to a valid HTTP response."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"The parameter name in your route can also be of the form "},{"type":"codeVoice","code":"{id}"},{"type":"text","text":", similar to OpenAPI specifications. With this form you can also extract parameter values from the URI that are prefixes or suffixes of a path component."}],"type":"paragraph"},{"code":["app.router.get(\"\/files\/{image}.jpg\") { request, context in","    let imageName = context.parameters.get(\"image\") else { throw HTTPError(.badRequest) }","    return getImage(image: imageName)","}"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"In the example above we match all paths that are a file with a jpg extension inside the files folder and then call a function with that image name."}]},{"level":3,"anchor":"Groups","type":"heading","text":"Groups"},{"inlineContent":[{"text":"Routes can be grouped together in a ","type":"text"},{"type":"codeVoice","code":"RouterGroup"},{"text":".  These allow for you to prefix a series of routes with the same path and more importantly apply middleware to only those routes. The example below is a group that includes five handlers all prefixed with the path “\/todos”.","type":"text"}],"type":"paragraph"},{"code":["let app = Application()","app.router.group(\"\/todos\")","    .put(use: createTodo)","    .get(use: listTodos)","    .get(\"{id}\", getTodo)","    .patch(\"{id}\", editTodo)","    .delete(\"{id}\", deleteTodo)"],"type":"codeListing","syntax":"swift"},{"anchor":"RequestContext-transformation","level":3,"text":"RequestContext transformation","type":"heading"},{"inlineContent":[{"type":"text","text":"The "},{"code":"RequestContext","type":"codeVoice"},{"type":"text","text":" can be transformed for the routes in a route group. The "},{"code":"RequestContext","type":"codeVoice"},{"text":" you are converting to needs to conform to ","type":"text"},{"isActive":true,"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/ChildRequestContext","type":"reference"},{"text":". This requires a parent context ie the ","type":"text"},{"type":"codeVoice","code":"RequestContext"},{"text":" you are converting from and a ","type":"text"},{"type":"reference","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/ChildRequestContext\/init(context:)","isActive":true},{"type":"text","text":" function to perform the conversion."}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["struct MyNewRequestContext: ChildRequestContext {","    typealias ParentContext = MyRequestContext","    init(context: ParentContext) throws {","        self.coreContext = context.coreContext","        ...","    }","}"]},{"type":"paragraph","inlineContent":[{"text":"Once you have defined how to perform the transform from your original ","type":"text"},{"type":"codeVoice","code":"RequestContext"},{"type":"text","text":" the conversion is added as follows"}]},{"code":["let app = Application(context: MyRequestContext.self)","app.router.group(\"\/todos\", context: MyNewRequestContext.self)","    .put(use: createTodo)","    .get(use: listTodos)"],"syntax":"swift","type":"codeListing"},{"level":3,"text":"Route Collections","anchor":"Route-Collections","type":"heading"},{"inlineContent":[{"type":"text","text":"A "},{"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/RouteCollection","isActive":true,"type":"reference"},{"type":"text","text":" is a collection of routes and middleware that can be added to a "},{"type":"codeVoice","code":"Router"},{"text":" in one go. It has the same API as ","type":"text"},{"code":"RouterGroup","type":"codeVoice"},{"type":"text","text":", so can have groups internal to the collection to allow for Middleware to applied to only sub-sections of the "},{"code":"RouteCollection","type":"codeVoice"},{"type":"text","text":"."}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["struct UserController<Context: RequestContext> {","    var routes: RouteCollection<Context> {","        let routes = RouteCollection()","        routes.post(\"signup\", use: signUp)","        routes.group(\"login\")","            .add(middleware: BasicAuthenticationMiddleware())","            .post(use: login)","        return routes","    }","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"You add the route collection to your router using "},{"type":"reference","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/Router\/addRoutes(_:atPath:)","isActive":true},{"text":".","type":"text"}]},{"code":["let router = Router()","router.add(\"users\", routes: UserController().routes)"],"type":"codeListing","syntax":"swift"},{"type":"heading","anchor":"Request-Body","level":3,"text":"Request Body"},{"type":"paragraph","inlineContent":[{"text":"By default the request body is an AsyncSequence of ByteBuffers. You can treat it as a series of buffers or collect it into one larger buffer.","type":"text"}]},{"syntax":"swift","type":"codeListing","code":["\/\/ process each buffer in the sequence separately","for try await buffer in request.body {","    process(buffer)","}"]},{"code":["\/\/ collect all the buffers in the sequence into a single buffer","let buffer = try await request.body.collate(maxSize: maximumBufferSizeAllowed)","}"],"type":"codeListing","syntax":"swift"},{"inlineContent":[{"type":"text","text":"Once you have read the sequence of buffers you cannot read it again. If you want to read the contents of a request body in middleware before it reaches the route handler, but still have it available for the route handler you can use "},{"code":"Request.collectBody(upTo:)","type":"codeVoice"},{"text":". After this point though the request body cannot be treated as a sequence of buffers as it has already been collapsed into a single buffer.","type":"text"}],"type":"paragraph"},{"anchor":"Writing-the-response-body","type":"heading","level":3,"text":"Writing the response body"},{"inlineContent":[{"text":"The response body is returned back to the server as a closure that will write the body. The closure is provided with a writer type conforming to ","type":"text"},{"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/ResponseBodyWriter","isActive":true,"type":"reference"},{"type":"text","text":" and the closure uses this to write the buffers that make up the body. In most cases you don’t need to know this as "},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/ResponseBody"},{"type":"text","text":" has initializers that take a single "},{"code":"ByteBuffer","type":"codeVoice"},{"type":"text","text":", a sequence of "},{"type":"codeVoice","code":"ByteBuffers"},{"type":"text","text":" and an "},{"type":"codeVoice","code":"AsyncSequence"},{"type":"text","text":" of "},{"code":"ByteBuffers","type":"codeVoice"},{"type":"text","text":" which covers most of the kinds of responses."}],"type":"paragraph"},{"inlineContent":[{"type":"text","text":"In the situation where you need something a little more flexible you can use the closure form. Below is a "},{"code":"ResponseBody","type":"codeVoice"},{"text":" that consists of 10 buffers of random data written with a one second pause between each buffer.","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["let responseBody = ResponseBody { writer in","    for _ in 0..<10 {","        try await Task.sleep(for: .seconds(1))","        let buffer = (0..<size).map { _ in UInt8.random(in: 0...255) }","        try await writer.write(buffer)","    }","    writer.finish(nil)","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"Once you have finished writing your response body you need to tell the writer you have finished by calling "},{"isActive":true,"type":"reference","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/ResponseBodyWriter\/finish(_:)"},{"type":"text","text":". At this point you can write trailing headers by passing them to the "},{"type":"codeVoice","code":"finish"},{"type":"text","text":" function. NB Trailing headers are only sent if your response body is a chunked and does not include a content length header."}]},{"anchor":"Editing-response-in-handler","level":3,"type":"heading","text":"Editing response in handler"},{"inlineContent":[{"type":"text","text":"The standard way to provide a custom response from a route handler is to return a "},{"type":"codeVoice","code":"Response"},{"type":"text","text":" from that handler. This method loses a lot of the automation of encoding responses, generating the correct status code etc."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Instead you can return what is called a "},{"type":"codeVoice","code":"EditedResponse"},{"type":"text","text":". This includes a type that can generate a response on its own via the "},{"code":"ResponseGenerator","type":"codeVoice"},{"text":" protocol and includes additional edits to the response.","type":"text"}]},{"code":["application.router.post(\"test\") { request -> EditedResponse in","    return .init(","        status: .accepted,","        headers: [.contentType: \"application\/json\"],","        response: #\"{\"test\": \"value\"}\"#","    )","}"],"syntax":"swift","type":"codeListing"}]}],"hierarchy":{"paths":[["doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird"],["doc:\/\/com.opticalaberration.hummingbird\/documentation\/index"]]},"identifier":{"url":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/RouterGuide","interfaceLanguage":"swift"},"sections":[],"topicSections":[{"identifiers":["doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/Router","doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/RouterGroup","doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/RouterMethods"],"title":"Reference","anchor":"Reference"}],"seeAlsoSections":[{"anchor":"Guides","title":"Guides","generated":true,"identifiers":["doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/MigratingToV2","doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/RequestContexts","doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/EncodingAndDecoding","doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/MiddlewareGuide","doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/ErrorHandling","doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/LoggingMetricsAndTracing","doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/ServiceLifecycle","doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/Testing","doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/PersistentData","doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/JobsGuide"]}],"references":{"doc://com.opticalaberration.hummingbird/documentation/HummingbirdCore/ResponseBodyWriter":{"title":"ResponseBodyWriter","navigatorTitle":[{"kind":"identifier","text":"ResponseBodyWriter"}],"abstract":[{"text":"HTTP Response Body part writer","type":"text"}],"fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"ResponseBodyWriter","kind":"identifier"}],"type":"topic","role":"symbol","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/ResponseBodyWriter","kind":"symbol","url":"\/documentation\/hummingbirdcore\/responsebodywriter"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/ChildRequestContext/init(context:)":{"kind":"symbol","required":true,"abstract":[{"type":"text","text":"Initialise RequestContext from source"}],"type":"topic","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/ChildRequestContext\/init(context:)","title":"init(context:)","fragments":[{"kind":"identifier","text":"init"},{"text":"(","kind":"text"},{"text":"context","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"ParentContext","kind":"typeIdentifier","preciseIdentifier":"s:11Hummingbird19ChildRequestContextP06ParentD0Qa"},{"kind":"text","text":") "},{"text":"throws","kind":"keyword"}],"url":"\/documentation\/hummingbird\/childrequestcontext\/init(context:)","role":"symbol"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/JobsGuide":{"role":"collectionGroup","url":"\/documentation\/hummingbird\/jobsguide","images":[{"type":"icon","identifier":"logo.png"}],"title":"Jobs","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/JobsGuide","abstract":[{"type":"text","text":"Offload work your server would be doing to another server."}],"type":"topic","kind":"article"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/LoggingMetricsAndTracing":{"kind":"article","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/LoggingMetricsAndTracing","type":"topic","abstract":[{"text":"Considered the three pillars of observability, logging, metrics and tracing provide different ways of viewing how your application is working.","type":"text"}],"url":"\/documentation\/hummingbird\/loggingmetricsandtracing","title":"Logging, Metrics and Tracing","role":"collectionGroup","images":[{"identifier":"logo.png","type":"icon"}]},"doc://com.opticalaberration.hummingbird/documentation/HummingbirdCore/ResponseBody":{"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/ResponseBody","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"text":"ResponseBody","kind":"identifier"}],"title":"ResponseBody","navigatorTitle":[{"kind":"identifier","text":"ResponseBody"}],"kind":"symbol","abstract":[{"type":"text","text":"Response body"}],"type":"topic","url":"\/documentation\/hummingbirdcore\/responsebody","role":"symbol"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/EncodingAndDecoding":{"title":"Encoding and Decoding","url":"\/documentation\/hummingbird\/encodinganddecoding","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/EncodingAndDecoding","kind":"article","role":"collectionGroup","images":[{"type":"icon","identifier":"logo.png"}],"abstract":[{"text":"Hummingbird uses ","type":"text"},{"type":"codeVoice","code":"Codable"},{"text":" to decode requests and encode responses.","type":"text"}],"type":"topic"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/RouterMethods":{"url":"\/documentation\/hummingbird\/routermethods","title":"RouterMethods","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/RouterMethods","kind":"symbol","fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"RouterMethods"}],"navigatorTitle":[{"kind":"identifier","text":"RouterMethods"}],"role":"symbol","abstract":[{"type":"text","text":"Conform to "},{"code":"RouterMethods","type":"codeVoice"},{"type":"text","text":" to add standard router verb (get, post …) methods"}],"type":"topic"},"logo.png":{"alt":null,"identifier":"logo.png","type":"image","variants":[{"url":"\/images\/com.opticalaberration.hummingbird\/logo.png","traits":["1x","light"]}]},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/RouteCollection":{"kind":"symbol","abstract":[{"type":"text","text":"Collection of routes"}],"title":"RouteCollection","role":"symbol","url":"\/documentation\/hummingbird\/routecollection","type":"topic","fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"RouteCollection"}],"navigatorTitle":[{"text":"RouteCollection","kind":"identifier"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/RouteCollection"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/ChildRequestContext":{"kind":"symbol","title":"ChildRequestContext","url":"\/documentation\/hummingbird\/childrequestcontext","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/ChildRequestContext","fragments":[{"kind":"keyword","text":"protocol"},{"text":" ","kind":"text"},{"text":"ChildRequestContext","kind":"identifier"}],"abstract":[{"type":"text","text":"A RequestContext that can be initialized from another RequestContext where initialization"},{"text":" ","type":"text"},{"text":"can throw errors which will be passed back up the middleware stack","type":"text"}],"navigatorTitle":[{"text":"ChildRequestContext","kind":"identifier"}],"type":"topic","role":"symbol"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/PersistentData":{"kind":"article","title":"Persistent data","images":[{"identifier":"logo.png","type":"icon"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/PersistentData","url":"\/documentation\/hummingbird\/persistentdata","abstract":[{"text":"How to persist data between requests to your server.","type":"text"}],"type":"topic","role":"collectionGroup"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/HTTPError":{"title":"HTTPError","url":"\/documentation\/hummingbird\/httperror","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/HTTPError","kind":"symbol","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"HTTPError","kind":"identifier"}],"navigatorTitle":[{"text":"HTTPError","kind":"identifier"}],"role":"symbol","abstract":[{"type":"text","text":"Default HTTP error. Provides an HTTP status and a message"}],"type":"topic"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird":{"kind":"symbol","title":"Hummingbird","images":[{"identifier":"logo.png","type":"icon"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird","url":"\/documentation\/hummingbird","abstract":[{"text":"Lightweight, modern, flexible server framework written in Swift.","type":"text"}],"type":"topic","role":"collection"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/MiddlewareGuide":{"title":"Middleware","url":"\/documentation\/hummingbird\/middlewareguide","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/MiddlewareGuide","kind":"article","role":"collectionGroup","images":[{"identifier":"logo.png","type":"icon"}],"abstract":[{"type":"text","text":"Processing requests and responses outside of request handlers."}],"type":"topic"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/RouterGroup":{"kind":"symbol","abstract":[{"type":"text","text":"Used to group together routes under a single path. Additional middleware can be added to the endpoint and each route can add a"},{"type":"text","text":" "},{"text":"suffix to the endpoint path","type":"text"}],"title":"RouterGroup","role":"symbol","url":"\/documentation\/hummingbird\/routergroup","type":"topic","fragments":[{"kind":"keyword","text":"struct"},{"text":" ","kind":"text"},{"kind":"identifier","text":"RouterGroup"}],"navigatorTitle":[{"text":"RouterGroup","kind":"identifier"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/RouterGroup"},"doc://com.opticalaberration.hummingbird/documentation/index":{"kind":"article","title":"Hummingbird","images":[{"type":"icon","identifier":"logo.png"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/index","url":"\/documentation\/index","abstract":[{"text":"Lightweight, flexible, modern server framework written in Swift.","type":"text"}],"type":"topic","role":"collection"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/Router/on(_:method:use:)":{"kind":"symbol","url":"\/documentation\/hummingbird\/router\/on(_:method:use:)","type":"topic","title":"on(_:method:use:)","role":"symbol","fragments":[{"kind":"keyword","text":"func"},{"text":" ","kind":"text"},{"kind":"identifier","text":"on"},{"kind":"text","text":"("},{"kind":"typeIdentifier","text":"RouterPath","preciseIdentifier":"s:11Hummingbird10RouterPathV"},{"kind":"text","text":", "},{"text":"method","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"HTTPRequest","kind":"typeIdentifier","preciseIdentifier":"s:9HTTPTypes11HTTPRequestV"},{"text":".","kind":"text"},{"text":"Method","kind":"typeIdentifier","preciseIdentifier":"s:9HTTPTypes11HTTPRequestV6MethodV"},{"kind":"text","text":", "},{"kind":"externalParam","text":"use"},{"text":": (","kind":"text"},{"preciseIdentifier":"s:15HummingbirdCore7RequestV","kind":"typeIdentifier","text":"Request"},{"kind":"text","text":", "},{"kind":"typeIdentifier","preciseIdentifier":"s:11Hummingbird13RouterMethodsP7ContextQa","text":"Context"},{"text":") ","kind":"text"},{"text":"async","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"keyword","text":"throws"},{"text":" -> ","kind":"text"},{"kind":"keyword","text":"some"},{"kind":"text","text":" "},{"preciseIdentifier":"s:11Hummingbird17ResponseGeneratorP","kind":"typeIdentifier","text":"ResponseGenerator"},{"text":") -> ","kind":"text"},{"text":"Self","kind":"typeIdentifier"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/Router\/on(_:method:use:)","abstract":[{"type":"text","text":"Add path for async closure"}]},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/RequestContexts":{"kind":"article","title":"Request Contexts","images":[{"type":"icon","identifier":"logo.png"}],"url":"\/documentation\/hummingbird\/requestcontexts","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/RequestContexts","abstract":[{"type":"text","text":"Controlling contextual data provided to middleware and route handlers"}],"type":"topic","role":"collectionGroup"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/Router/addRoutes(_:atPath:)":{"title":"addRoutes(_:atPath:)","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"addRoutes"},{"kind":"text","text":"("},{"kind":"typeIdentifier","preciseIdentifier":"s:11Hummingbird15RouteCollectionC","text":"RouteCollection"},{"text":"<","kind":"text"},{"kind":"typeIdentifier","text":"Context","preciseIdentifier":"s:11Hummingbird13RouterMethodsP7ContextQa"},{"text":">, ","kind":"text"},{"text":"atPath","kind":"externalParam"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:11Hummingbird10RouterPathV","text":"RouterPath"},{"kind":"text","text":") -> "},{"text":"Self","kind":"typeIdentifier"}],"type":"topic","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/Router\/addRoutes(_:atPath:)","url":"\/documentation\/hummingbird\/router\/addroutes(_:atpath:)","role":"symbol","kind":"symbol","abstract":[{"type":"text","text":"Add route collection to router"}]},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/ServiceLifecycle":{"type":"topic","title":"Service Lifecycle","url":"\/documentation\/hummingbird\/servicelifecycle","kind":"article","role":"article","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/ServiceLifecycle","abstract":[{"text":"Integration with Swift Service Lifecycle","type":"text"}],"images":[{"identifier":"logo.png","type":"icon"}]},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/Testing":{"type":"topic","title":"Testing","url":"\/documentation\/hummingbird\/testing","kind":"article","role":"article","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/Testing","abstract":[{"type":"text","text":"Using the HummingbirdTesting framework to test your application"}],"images":[{"identifier":"logo.png","type":"icon"}]},"doc://com.opticalaberration.hummingbird/documentation/HummingbirdCore/ResponseBodyWriter/finish(_:)":{"role":"symbol","required":true,"fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"finish","kind":"identifier"},{"kind":"text","text":"("},{"preciseIdentifier":"s:9HTTPTypes10HTTPFieldsV","kind":"typeIdentifier","text":"HTTPFields"},{"text":"?) ","kind":"text"},{"text":"async","kind":"keyword"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"}],"type":"topic","abstract":[{"text":"Finish writing body","type":"text"}],"title":"finish(_:)","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/ResponseBodyWriter\/finish(_:)","url":"\/documentation\/hummingbirdcore\/responsebodywriter\/finish(_:)","kind":"symbol"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/Router":{"url":"\/documentation\/hummingbird\/router","title":"Router","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/Router","kind":"symbol","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"text":"Router","kind":"identifier"}],"navigatorTitle":[{"text":"Router","kind":"identifier"}],"role":"symbol","abstract":[{"type":"text","text":"Create rules for routing requests and then create "},{"code":"Responder","type":"codeVoice"},{"type":"text","text":" that will follow these rules."}],"type":"topic"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/MigratingToV2":{"kind":"article","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/MigratingToV2","type":"topic","abstract":[{"text":"Migration guide for converting Hummingbird v1 applications to Hummingbird v2","type":"text"}],"url":"\/documentation\/hummingbird\/migratingtov2","title":"Migrating to Hummingbird v2","role":"article","images":[{"type":"icon","identifier":"logo.png"}]},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/ErrorHandling":{"title":"Error Handling","url":"\/documentation\/hummingbird\/errorhandling","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/ErrorHandling","kind":"article","role":"collectionGroup","images":[{"identifier":"logo.png","type":"icon"}],"abstract":[{"type":"text","text":"How to build errors for the server to return."}],"type":"topic"}}}