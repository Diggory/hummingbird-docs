{"schemaVersion":{"minor":3,"patch":0,"major":0},"variants":[{"paths":["\/tutorials\/hummingbird\/todos-2-api"],"traits":[{"interfaceLanguage":"swift"}]}],"kind":"project","hierarchy":{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos","paths":[["doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos","doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/$volume","doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/API-Setup"]],"modules":[{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/Application-setup","projects":[{"sections":[{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-1-Setup#Setup-your-project","kind":"task"},{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-1-Setup#Extend-your-Application","kind":"task"}],"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-1-Setup"}]},{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/API-Setup","projects":[{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-2-API","sections":[{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-2-API#Todo-Controller-and-Repository","kind":"task"},{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-2-API#Testing-your-application-with-curl","kind":"task"}]}]},{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/Testing-your-application","projects":[{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-3-Testing","sections":[{"kind":"task","reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-3-Testing#Setup-your-project-for-testing"},{"kind":"task","reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-3-Testing#Test-you-application"}]}]},{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/Store-Todos-in-a-database","projects":[{"reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-4-Postgres","sections":[{"kind":"task","reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-4-Postgres#Setup-your-Postgres-database"},{"kind":"task","reference":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-4-Postgres#Setup-a-Postgres-repository"}]}]}]},"sections":[{"title":"Add your application API","content":[{"type":"paragraph","inlineContent":[{"text":"Add some functionality to your app","type":"text"}]}],"kind":"hero","image":"hummingbird.png","chapter":"API Setup","estimatedTimeInMinutes":15,"backgroundImage":"hummingbird.png"},{"tasks":[{"anchor":"Todo-Controller-and-Repository","stepsSection":[{"runtimePreview":null,"content":[{"inlineContent":[{"text":"Add the new file ","type":"text"},{"code":"Sources\/TodoController.swift","type":"codeVoice"}],"type":"paragraph"}],"caption":[],"type":"step","media":null,"code":"todos-api-01.swift"},{"runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Go back to Todos.swift"}]}],"caption":[],"type":"step","media":null,"code":"todos-extend-06.swift"},{"runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"text":"And add the TodoController APIs to your router. The Todos API has a URI prefix of “todos”.","type":"text"}]}],"caption":[],"type":"step","media":null,"code":"todos-api-02.swift"},{"runtimePreview":null,"content":[{"inlineContent":[{"text":"Before we start adding routes, we going to use the ","type":"text"},{"type":"reference","isActive":true,"identifier":"https:\/\/www.geeksforgeeks.org\/repository-design-pattern\/"},{"text":" to separate our storage concerns from our API. With this we should be able to create an API and test it without worrying about Database setup.","type":"text"}],"type":"paragraph"}],"caption":[],"type":"step","media":null,"code":null},{"runtimePreview":null,"content":[{"inlineContent":[{"type":"text","text":"Create a product "},{"code":"Todo","type":"codeVoice"},{"type":"text","text":" that includes everything to define a todo."}],"type":"paragraph"}],"caption":[],"type":"step","media":null,"code":"todos-api-03.swift"},{"runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"We are going to use "},{"code":"Todo","type":"codeVoice"},{"type":"text","text":" as the return value for some of our routes, so it needs to conform to "},{"code":"HBResponseCodable","type":"codeVoice"},{"type":"text","text":". Later we will also be using it in tests so lets add "},{"code":"Decodable","type":"codeVoice"},{"type":"text","text":" and "},{"code":"Equatable","type":"codeVoice"},{"type":"text","text":" conformances."}]}],"caption":[],"type":"step","media":null,"code":"todos-api-04.swift"},{"runtimePreview":null,"content":[{"inlineContent":[{"text":"Create a ","type":"text"},{"type":"codeVoice","code":"TodoRepository"},{"text":" protocol that defines all the methods to manage todos: (get, list, create, update, delete and deleteAll).","type":"text"}],"type":"paragraph"}],"caption":[],"type":"step","media":null,"code":"todos-api-05.swift"},{"runtimePreview":null,"content":[{"inlineContent":[{"text":"Create a concrete implementation of ","type":"text"},{"code":"TodoRepository","type":"codeVoice"},{"text":" protocol that saves everything to memory. We use an actor because multiple tasks could be accessing the repository at the same time.","type":"text"}],"type":"paragraph"}],"caption":[],"type":"step","media":null,"code":"todos-api-06.swift"},{"runtimePreview":null,"content":[{"inlineContent":[{"type":"text","text":"Return to TodoController.swift"}],"type":"paragraph"}],"caption":[],"type":"step","media":null,"code":"todos-api-01.swift"},{"runtimePreview":null,"content":[{"inlineContent":[{"type":"text","text":"And add a generic repository member variable conforming to "},{"type":"codeVoice","code":"TodoRepository"},{"type":"text","text":" to be used by the "},{"type":"codeVoice","code":"TodoController"},{"type":"text","text":" routes."}],"type":"paragraph"}],"caption":[],"type":"step","media":null,"code":"todos-api-07.swift"},{"runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Go to Todos.swift"}]}],"caption":[],"type":"step","media":null,"code":"todos-api-02.swift"},{"runtimePreview":null,"content":[{"inlineContent":[{"type":"text","text":"And add the repository parameter to the TodoController initializer."}],"type":"paragraph"}],"caption":[],"type":"step","media":null,"code":"todos-api-08.swift"},{"runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"text":"Return to TodoController.swift. We can now start adding our API.","type":"text"}]}],"caption":[],"type":"step","media":null,"code":"todos-api-07.swift"},{"runtimePreview":null,"content":[{"inlineContent":[{"text":"Our first entrypoint is to return a Todo given an id in the URI. We extract the id from the URI, attempt to convert it to a UUID and then call the repository method ","type":"text"},{"code":"get","type":"codeVoice"},{"text":" and return the result. The result is then converted to a response using the JSONEncoder attached to the context.","type":"text"}],"type":"paragraph"}],"caption":[],"type":"step","media":null,"code":"todos-api-09.swift"},{"runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This entrypoint has a few other features. If it fails to convert the id to a UUID then it throws an "},{"code":"HBHTTPError","type":"codeVoice"},{"type":"text","text":". This is an error that can be converted by the server to a valid HTTP response. If the server receives an error it cannot convert to an HTTP response it will return a 500 (Internal Server Error) HTTP error to the client."}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"If the entrypoint returns nil because it could not find a route this will automatically return a 204 (No Content) HTTP response to the client."}]}],"type":"step","media":null,"code":"todos-api-09.swift"},{"runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"text":"Our second entrypoint is to create a Todo. We have added a struct to decode from the request. In a similar way to the get entrypoint response using JSONEncoder, this uses the JSONDecoder attached to the context. We then call the repository ","type":"text"},{"code":"create","type":"codeVoice"},{"text":" method and return the result.","type":"text"}]}],"caption":[],"type":"step","media":null,"code":"todos-api-10.swift"},{"runtimePreview":null,"content":[{"inlineContent":[{"type":"text","text":"Returning an object and not a raw HBResponse, in general sets the response status to 200 (OK). In this situation we want to return a 201 (Created) status. We can do this by returning an "},{"type":"codeVoice","code":"HBEditedResponse"},{"type":"text","text":" which can be used to edit the status code and headers of a generated response."}],"type":"paragraph"}],"caption":[],"type":"step","media":null,"code":"todos-api-11.swift"},{"runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"text":"We now have an API we can test. Lets use curl to create a Todo. If we include the command line parameter ","type":"text"},{"type":"codeVoice","code":"-i"},{"text":" we get the full HTTP response and that the status code is 201 (Created).","type":"text"}]}],"caption":[],"type":"step","media":null,"code":"todos-api-12.sh"},{"runtimePreview":null,"content":[{"inlineContent":[{"type":"text","text":"Then use curl to access the URL that was in the returned json from the previous curl call."}],"type":"paragraph"}],"caption":[{"inlineContent":[{"text":"Cool it works!","type":"text"}],"type":"paragraph"}],"type":"step","media":null,"code":"todos-api-13.sh"},{"runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Continuing with adding our API entrypoints"}]}],"caption":[],"type":"step","media":null,"code":"todos-api-11.swift"},{"runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This is the entrypoint that lists all of the todos that have been created. Because Todo conforms to HBResponseEncodable, Array<Todo> automatically conforms to HBResponseEncodable as well."}]}],"caption":[],"type":"step","media":null,"code":"todos-api-14.swift"},{"runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"text":"This is the entrypoint that updates a todo. It extracts the todo id from the URI, decodes the UpdateRequest from the request and then calls the repository ","type":"text"},{"type":"codeVoice","code":"update"},{"text":" function.","type":"text"}]}],"caption":[],"type":"step","media":null,"code":"todos-api-15.swift"},{"runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This is the entrypoint that deletes a todo. It extracts the todo id from the URI and calls the repository "},{"type":"codeVoice","code":"delete"},{"type":"text","text":" function."}]}],"caption":[],"type":"step","media":null,"code":"todos-api-16.swift"},{"runtimePreview":null,"content":[{"type":"paragraph","inlineContent":[{"text":"The final entrypoint is the one that deletes all todos. It simply calls the repository ","type":"text"},{"code":"deleteAll","type":"codeVoice"},{"text":" function, as it doesn’t need to extract any information from the request.","type":"text"}]}],"caption":[],"type":"step","media":null,"code":"todos-api-17.swift"}],"contentSection":[{"kind":"contentAndMedia","content":[{"type":"paragraph","inlineContent":[{"text":"Create a controller type that will hold the Todos API","type":"text"}]}],"mediaPosition":"trailing","media":"hummingbird.png"}],"title":"Todo Controller and Repository"},{"anchor":"Testing-your-application-with-curl","stepsSection":[{"type":"step","code":"todos-api-18.sh","content":[{"inlineContent":[{"text":"Lets test the full API. First we are going to create two todos","type":"text"}],"type":"paragraph"}],"caption":[],"media":null,"runtimePreview":null},{"type":"step","code":"todos-api-19.sh","content":[{"type":"paragraph","inlineContent":[{"text":"When we query the URL returned by the first curl request we should get the first Todo added.","type":"text"}]}],"caption":[],"media":null,"runtimePreview":null},{"type":"step","code":"todos-api-20.sh","content":[{"inlineContent":[{"type":"text","text":"If we update the second Todo and set it to completed …"}],"type":"paragraph"}],"caption":[],"media":null,"runtimePreview":null},{"type":"step","code":"todos-api-21.sh","content":[{"inlineContent":[{"type":"text","text":"when we list all the tests you will see it is now flagged as completed"}],"type":"paragraph"}],"caption":[],"media":null,"runtimePreview":null},{"type":"step","code":"todos-api-22.sh","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"If we delete a Todo …"}]}],"caption":[],"media":null,"runtimePreview":null},{"type":"step","code":"todos-api-23.sh","content":[{"inlineContent":[{"type":"text","text":"when we try to get it again a 204 (No Content) response is returned, as it no longer exists."}],"type":"paragraph"}],"caption":[],"media":null,"runtimePreview":null},{"type":"step","code":"todos-api-24.sh","content":[{"inlineContent":[{"text":"If we delete all of the Todos …","type":"text"}],"type":"paragraph"}],"caption":[],"media":null,"runtimePreview":null},{"type":"step","code":"todos-api-25.sh","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"when we list the Todos, the list is empty."}]}],"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"This is not exactly a thorough way to test your application. It is error prone and cumbersome. Move onto the next chapter to discover how you can make this process more streamlined."}]}],"media":null,"runtimePreview":null}],"contentSection":[{"mediaPosition":"trailing","content":[{"inlineContent":[{"type":"text","text":"Use curl to ensure your API is working as expected."}],"type":"paragraph"}],"media":"hummingbird.png","kind":"contentAndMedia"}],"title":"Testing your application with curl"}],"kind":"tasks"},{"abstract":[{"type":"text","text":"Test your application using the HummingbirdXCT framework"}],"action":{"type":"reference","overridingTitle":"Get started","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-3-Testing","isActive":true,"overridingTitleInlineContent":[{"text":"Get started","type":"text"}]},"title":"Testing your application","kind":"callToAction","featuredEyebrow":"Tutorial"}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-2-API"},"metadata":{"title":"Add your application API","role":"project","category":"Todo backend","categoryPathComponent":"Todos"},"references":{"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-3-Testing#Setup-your-project-for-testing":{"url":"\/tutorials\/hummingbird\/todos-3-testing#Setup-your-project-for-testing","type":"section","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-3-Testing#Setup-your-project-for-testing","kind":"section","abstract":[{"text":"Test your application using the HummingbirdXCT framework","type":"text"}],"role":"pseudoSymbol","title":"Setup your project for testing"},"todos-api-22.sh":{"identifier":"todos-api-22.sh","content":["> curl -i -X DELETE http:\/\/localhost:8080\/todos\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253 ","HTTP\/1.1 200 OK","Content-Length: 0","Date: Sat, 6 Jan 2024 11:51:47 GMT"],"highlights":[],"type":"file","fileName":"Test delete","fileType":"","syntax":""},"todos-api-12.sh":{"highlights":[],"fileName":"Test create","syntax":"","type":"file","identifier":"todos-api-12.sh","content":["> curl -i -X POST localhost:8080\/todos -d'{\"title\": \"Read chapter on testing applications\"}'","HTTP\/1.1 201 Created","Content-Type: application\/json; charset=utf-8","Content-Length: 187","Date: Sat, 6 Jan 2024 10:02:08 GMT","","{\"completed\":false,\"id\":\"284DC153-4FE9-458D-8A93-6CB60990B2F3\",\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/284DC153-4FE9-458D-8A93-6CB60990B2F3\",\"title\":\"Read chapter on testing applications\"}"],"fileType":""},"todos-api-14.swift":{"type":"file","fileName":"TodoController.swift","identifier":"todos-api-14.swift","syntax":"swift","highlights":[{"line":12},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27}],"content":["import Foundation","import Hummingbird","","struct TodoController<Context: HBRequestContext, Repository: TodoRepository> {","    \/\/ Todo repository","    let repository: Repository","","    \/\/ add Todos API to router group","    func addRoutes(to group: HBRouterGroup<Context>) {","        group","            .get(\":id\", use: get)","            .get(use: list)","            .post(use: create)","    }","","    \/\/\/ Get todo entrypoint","    @Sendable func get(request: HBRequest, context: Context) async throws -> Todo? {","        let id = try context.parameters.require(\"id\")","        guard let uuid = UUID(uuidString: id) else { throw HBHTTPError(.badRequest) }","        return try await self.repository.get(id: uuid)","    }","","    \/\/\/ Get list of todos entrypoint","    @Sendable func list(request: HBRequest, context: Context) async throws -> [Todo] {","        return try await self.repository.list()","    }","","    struct CreateRequest: Decodable {","        let title: String","        let order: Int?","    }","    \/\/\/ Create todo entrypoint","    @Sendable func create(request: HBRequest, context: Context) async throws -> HBEditedResponse<Todo> {","        let request = try await request.decode(as: CreateRequest.self, using: context)","        let todo = try await self.repository.create(title: request.title, order: request.order, urlPrefix: \"http:\/\/localhost:8080\/todos\/\")","        return HBEditedResponse(status: .created, response: todo)","    }","}"],"fileType":"swift"},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-1-Setup":{"identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-1-Setup","title":"Setup a Hummingbird application.","type":"topic","estimatedTime":"5min","role":"project","abstract":[{"text":"Create a simple web application.","type":"text"}],"url":"\/tutorials\/hummingbird\/todos-1-setup","kind":"project"},"todos-api-20.sh":{"syntax":"","highlights":[],"fileName":"Test update","identifier":"todos-api-20.sh","type":"file","content":["> curl -i -X PATCH http:\/\/localhost:8080\/todos\/31B0FCCA-F084-4EB6-BCEF-002A00077549 -d '{\"completed\": true}'","HTTP\/1.1 200 OK","Content-Type: application\/json; charset=utf-8","Content-Length: 164","Date: Sat, 6 Jan 2024 11:50:01 GMT","","{\"title\":\"Brush my teeth\",\"completed\":true,\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/31B0FCCA-F084-4EB6-BCEF-002A00077549\",\"id\":\"31B0FCCA-F084-4EB6-BCEF-002A00077549\"}"],"fileType":""},"doc://com.opticalaberration.hummingbird/tutorials/Todos/Store-Todos-in-a-database":{"type":"topic","kind":"article","title":"Store Todos in a database","role":"article","url":"\/tutorials\/todos\/store-todos-in-a-database","abstract":[],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/Store-Todos-in-a-database"},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-2-API":{"type":"topic","kind":"project","title":"Add your application API","estimatedTime":"15min","role":"project","url":"\/tutorials\/hummingbird\/todos-2-api","abstract":[{"text":"Add some functionality to your app","type":"text"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-2-API"},"doc://com.opticalaberration.hummingbird/tutorials/Todos":{"type":"topic","kind":"overview","title":"Build a Todos application.","role":"overview","url":"\/tutorials\/todos","abstract":[{"text":"This is a tutorial showing you how to build a simple Todos application that stores Todos in a database. It follows the API spec of the ","type":"text"},{"identifier":"https:\/\/www.todobackend.com","isActive":true,"type":"reference"},{"text":" project.","type":"text"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos"},"todos-api-23.sh":{"syntax":"","type":"file","content":["> curl -i -X DELETE http:\/\/localhost:8080\/todos\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253 ","HTTP\/1.1 200 OK","Content-Length: 0","Date: Sat, 6 Jan 2024 11:51:47 GMT","","> curl -i http:\/\/localhost:8080\/todos\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253 ","HTTP\/1.1 204 No Content","Date: Sat, 6 Jan 2024 11:51:59 GMT"],"fileName":"Test delete","highlights":[{"line":5},{"line":6},{"line":7},{"line":8}],"fileType":"","identifier":"todos-api-23.sh"},"hummingbird.png":{"variants":[{"traits":["1x","light"],"url":"\/images\/hummingbird.png"}],"identifier":"hummingbird.png","alt":"Hummingbird logo","type":"image"},"todos-api-25.sh":{"syntax":"","highlights":[{"line":14},{"line":15},{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21}],"fileName":"Test delete","identifier":"todos-api-25.sh","type":"file","content":["> curl -i -X DELETE http:\/\/localhost:8080\/todos\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253 ","HTTP\/1.1 200 OK","Content-Length: 0","Date: Sat, 6 Jan 2024 11:51:47 GMT","","> curl -i http:\/\/localhost:8080\/todos\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253 ","HTTP\/1.1 204 No Content","Date: Sat, 6 Jan 2024 11:51:59 GMT","","> curl -i -X DELETE http:\/\/localhost:8080\/todos\/                                    ","HTTP\/1.1 200 OK","Content-Length: 0","Date: Sat, 6 Jan 2024 11:52:19 GMT","","> curl -i http:\/\/localhost:8080\/todos\/                                              ","HTTP\/1.1 200 OK","Content-Type: application\/json; charset=utf-8","Content-Length: 2","Date: Sat, 6 Jan 2024 11:52:24 GMT","","[]"],"fileType":""},"todos-api-11.swift":{"identifier":"todos-api-11.swift","content":["import Foundation","import Hummingbird","","struct TodoController<Context: HBRequestContext, Repository: TodoRepository> {","    \/\/ Todo repository","    let repository: Repository","","    \/\/ add Todos API to router group","    func addRoutes(to group: HBRouterGroup<Context>) {","        group","            .get(\":id\", use: get)","            .post(use: create)","    }","","    \/\/\/ Get todo entrypoint","    @Sendable func get(request: HBRequest, context: Context) async throws -> Todo? {","        let id = try context.parameters.require(\"id\")","        guard let uuid = UUID(uuidString: id) else { throw HBHTTPError(.badRequest) }","        return try await self.repository.get(id: uuid)","    }","","    struct CreateRequest: Decodable {","        let title: String","        let order: Int?","    }","    \/\/\/ Create todo entrypoint","    @Sendable func create(request: HBRequest, context: Context) async throws -> HBEditedResponse<Todo> {","        let request = try await request.decode(as: CreateRequest.self, using: context)","        let todo = try await self.repository.create(title: request.title, order: request.order, urlPrefix: \"http:\/\/localhost:8080\/todos\/\")","        return HBEditedResponse(status: .created, response: todo)","    }","}"],"highlights":[],"type":"file","fileName":"TodoController.swift","fileType":"swift","syntax":"swift"},"todos-api-10.swift":{"type":"file","fileName":"TodoController.swift","identifier":"todos-api-10.swift","syntax":"swift","highlights":[{"line":12},{"line":21},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":29},{"line":30}],"content":["import Foundation","import Hummingbird","","struct TodoController<Context: HBRequestContext, Repository: TodoRepository> {","    \/\/ Todo repository","    let repository: Repository","","    \/\/ add Todos API to router group","    func addRoutes(to group: HBRouterGroup<Context>) {","        group","            .get(\":id\", use: get)","            .post(use: create)","    }","","    \/\/\/ Get todo entrypoint","    @Sendable func get(request: HBRequest, context: Context) async throws -> Todo? {","        let id = try context.parameters.require(\"id\")","        guard let uuid = UUID(uuidString: id) else { throw HBHTTPError(.badRequest) }","        return try await self.repository.get(id: uuid)","    }","","    struct CreateRequest: Decodable {","        let title: String","        let order: Int?","    }","    \/\/\/ Create todo entrypoint","    @Sendable func create(request: HBRequest, context: Context) async throws -> Todo {","        let request = try await request.decode(as: CreateRequest.self, using: context)","        return try await self.repository.create(title: request.title, order: request.order, urlPrefix: \"http:\/\/localhost:8080\/todos\/\")","    }","}"],"fileType":"swift"},"todos-api-18.sh":{"fileName":"Test create and get","syntax":"","identifier":"todos-api-18.sh","content":["> curl -i -X POST localhost:8080\/todos -d'{\"title\": \"Wash my hair\"}'  ","HTTP\/1.1 201 Created","Content-Type: application\/json; charset=utf-8","Content-Length: 163","Date: Sat, 6 Jan 2024 11:48:06 GMT","","{\"completed\":false,\"title\":\"Wash my hair\",\"id\":\"7BDECA4F-3A8A-49AC-A83C-5F1C6E181253\",\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253\"}","","> curl -i -X POST localhost:8080\/todos -d'{\"title\": \"Brush my teeth\"}'","HTTP\/1.1 201 Created","Content-Type: application\/json; charset=utf-8","Content-Length: 165","Date: Sat, 6 Jan 2024 11:48:11 GMT","","{\"id\":\"31B0FCCA-F084-4EB6-BCEF-002A00077549\",\"title\":\"Brush my teeth\",\"completed\":false,\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/31B0FCCA-F084-4EB6-BCEF-002A00077549\"}"],"type":"file","fileType":"","highlights":[]},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-2-API#Testing-your-application-with-curl":{"type":"section","kind":"section","title":"Testing your application with curl","role":"pseudoSymbol","url":"\/tutorials\/hummingbird\/todos-2-api#Testing-your-application-with-curl","abstract":[{"text":"Add some functionality to your app","type":"text"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-2-API#Testing-your-application-with-curl"},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-4-Postgres#Setup-your-Postgres-database":{"type":"section","kind":"section","title":"Setup your Postgres database","role":"pseudoSymbol","url":"\/tutorials\/hummingbird\/todos-4-postgres#Setup-your-Postgres-database","abstract":[{"text":"Now we have a working API and a way to test it, lets look into storing our todos in a Postgres database with PostgresNIO.","type":"text"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-4-Postgres#Setup-your-Postgres-database"},"todos-api-06.swift":{"syntax":"swift","type":"file","content":["import Foundation","","\/\/\/ Concrete implementation of `TodoRepository` that stores everything in memory","actor TodoMemoryRepository: TodoRepository {","    var todos: [UUID: Todo]","","    init() {","        self.todos = [:]","    }","","    \/\/\/ Create todo.","    func create(title: String, order: Int?, urlPrefix: String) async throws -> Todo {","        let id = UUID()","        let url = urlPrefix + id.uuidString","        let todo = Todo(id: id, title: title, order: order, url: url, completed: false)","        self.todos[id] = todo","        return todo","    }","    \/\/\/ Get todo","    func get(id: UUID) async throws -> Todo? {","        return self.todos[id]","    }","    \/\/\/ List all todos","    func list() async throws -> [Todo] {","        return self.todos.values.map { $0 }","    }","    \/\/\/ Update todo. Returns updated todo if successful","    func update(id: UUID, title: String?, order: Int?, completed: Bool?) async throws -> Todo? {","        if var todo = self.todos[id] {","            if let title {","                todo.title = title","            }","            if let order {","                todo.order = order","            }","            if let completed {","                todo.completed = completed","            }","            self.todos[id] = todo","            return todo","        }","        return nil","    }","    \/\/\/ Delete todo. Returns true if successful","    func delete(id: UUID) async throws -> Bool {","        if self.todos[id] != nil {","            self.todos[id] = nil","            return true","        }","        return false","    }","    \/\/\/ Delete all todos","    func deleteAll() async throws {","        self.todos = [:]","    }","","}"],"fileName":"TodoMemoryRepository.swift","highlights":[],"fileType":"swift","identifier":"todos-api-06.swift"},"https://www.geeksforgeeks.org/repository-design-pattern/":{"titleInlineContent":[{"type":"text","text":"repository design pattern"}],"identifier":"https:\/\/www.geeksforgeeks.org\/repository-design-pattern\/","title":"repository design pattern","type":"link","url":"https:\/\/www.geeksforgeeks.org\/repository-design-pattern\/"},"todos-api-16.swift":{"identifier":"todos-api-16.swift","content":["import Foundation","import Hummingbird","","struct TodoController<Context: HBRequestContext, Repository: TodoRepository> {","    \/\/ Todo repository","    let repository: Repository","","    \/\/ add Todos API to router group","    func addRoutes(to group: HBRouterGroup<Context>) {","        group","            .get(\":id\", use: get)","            .get(use: list)","            .post(use: create)","            .patch(\":id\", use: update)","            .delete(\":id\", use: delete)","    }","","    \/\/\/ Delete todo entrypoint","    @Sendable func delete(request: HBRequest, context: Context) async throws -> HTTPResponse.Status {","        let id = try context.parameters.require(\"id\")","        guard let uuid = UUID(uuidString: id) else { throw HBHTTPError(.badRequest) }","        if try await self.repository.delete(id: uuid) {","            return .ok","        } else {","            return .badRequest","        }","    }","","    struct UpdateRequest: Decodable {","        let title: String?","        let order: Int?","        let completed: Bool?","    }","    \/\/\/ Update todo entrypoint","    @Sendable func update(request: HBRequest, context: Context) async throws -> Todo? {","        let id = try context.parameters.require(\"id\")","        guard let uuid = UUID(uuidString: id) else { throw HBHTTPError(.badRequest) }","        let request = try await request.decode(as: UpdateRequest.self, using: context)","        guard let todo = try await self.repository.update(","            id: uuid, ","            title: request.title, ","            order: request.order, ","            completed: request.completed","        ) else {","            throw HBHTTPError(.badRequest)","        }","        return todo","    }","","    \/\/\/ Get todo entrypoint","    @Sendable func get(request: HBRequest, context: Context) async throws -> Todo? {","        let id = try context.parameters.require(\"id\")","        guard let uuid = UUID(uuidString: id) else { throw HBHTTPError(.badRequest) }","        return try await self.repository.get(id: uuid)","    }","","    \/\/\/ Get list of todos entrypoint","    @Sendable func list(request: HBRequest, context: Context) async throws -> [Todo] {","        return try await self.repository.list()","    }","","    struct CreateRequest: Decodable {","        let title: String","        let order: Int?","    }","    \/\/\/ Create todo entrypoint","    @Sendable func create(request: HBRequest, context: Context) async throws -> HBEditedResponse<Todo> {","        let request = try await request.decode(as: CreateRequest.self, using: context)","        let todo = try await self.repository.create(title: request.title, order: request.order, urlPrefix: \"http:\/\/localhost:8080\/todos\/\")","        return HBEditedResponse(status: .created, response: todo)","    }","}"],"highlights":[{"line":15},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28}],"type":"file","fileName":"TodoController.swift","fileType":"swift","syntax":"swift"},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-1-Setup#Setup-your-project":{"identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-1-Setup#Setup-your-project","title":"Setup your project","type":"section","role":"pseudoSymbol","abstract":[{"text":"Create a simple web application.","type":"text"}],"url":"\/tutorials\/hummingbird\/todos-1-setup#Setup-your-project","kind":"section"},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-2-API#Todo-Controller-and-Repository":{"url":"\/tutorials\/hummingbird\/todos-2-api#Todo-Controller-and-Repository","type":"section","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-2-API#Todo-Controller-and-Repository","kind":"section","abstract":[{"text":"Add some functionality to your app","type":"text"}],"role":"pseudoSymbol","title":"Todo Controller and Repository"},"todos-api-03.swift":{"highlights":[],"fileName":"Todo.swift","syntax":"swift","type":"file","identifier":"todos-api-03.swift","content":["import Foundation","","struct Todo {","    \/\/ Todo ID","    var id: UUID","    \/\/ Title ","    var title: String","    \/\/ Order number","    var order: Int?","    \/\/ URL to get this ToDo","    var url: String","    \/\/ Is Todo complete","    var completed: Bool?","}"],"fileType":"swift"},"todos-api-17.swift":{"type":"file","fileName":"TodoController.swift","identifier":"todos-api-17.swift","syntax":"swift","highlights":[{"line":16},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24}],"content":["import Foundation","import Hummingbird","","struct TodoController<Context: HBRequestContext, Repository: TodoRepository> {","    \/\/ Todo repository","    let repository: Repository","","    \/\/ add Todos API to router group","    func addRoutes(to group: HBRouterGroup<Context>) {","        group","            .get(\":id\", use: get)","            .get(use: list)","            .post(use: create)","            .patch(\":id\", use: update)","            .delete(\":id\", use: delete)","            .delete(use: deleteAll)","    }","","    \/\/\/ Delete all todos entrypoint","    @Sendable func deleteAll(request: HBRequest, context: Context) async throws -> HTTPResponse.Status {","        try await self.repository.deleteAll()","        return .ok","    }","","    \/\/\/ Delete todo entrypoint","    @Sendable func delete(request: HBRequest, context: Context) async throws -> HTTPResponse.Status {","        let id = try context.parameters.require(\"id\")","        guard let uuid = UUID(uuidString: id) else { throw HBHTTPError(.badRequest) }","        if try await self.repository.delete(id: uuid) {","            return .ok","        } else {","            return .badRequest","        }","    }","","    struct UpdateRequest: Decodable {","        let title: String?","        let order: Int?","        let completed: Bool?","    }","    \/\/\/ Update todo entrypoint","    @Sendable func update(request: HBRequest, context: Context) async throws -> Todo? {","        let id = try context.parameters.require(\"id\")","        guard let uuid = UUID(uuidString: id) else { throw HBHTTPError(.badRequest) }","        let request = try await request.decode(as: UpdateRequest.self, using: context)","        guard let todo = try await self.repository.update(","            id: uuid, ","            title: request.title, ","            order: request.order, ","            completed: request.completed","        ) else {","            throw HBHTTPError(.badRequest)","        }","        return todo","    }","","    \/\/\/ Get todo entrypoint","    @Sendable func get(request: HBRequest, context: Context) async throws -> Todo? {","        let id = try context.parameters.require(\"id\")","        guard let uuid = UUID(uuidString: id) else { throw HBHTTPError(.badRequest) }","        return try await self.repository.get(id: uuid)","    }","","    \/\/\/ Get list of todos entrypoint","    @Sendable func list(request: HBRequest, context: Context) async throws -> [Todo] {","        return try await self.repository.list()","    }","","    struct CreateRequest: Decodable {","        let title: String","        let order: Int?","    }","    \/\/\/ Create todo entrypoint","    @Sendable func create(request: HBRequest, context: Context) async throws -> HBEditedResponse<Todo> {","        let request = try await request.decode(as: CreateRequest.self, using: context)","        let todo = try await self.repository.create(title: request.title, order: request.order, urlPrefix: \"http:\/\/localhost:8080\/todos\/\")","        return HBEditedResponse(status: .created, response: todo)","    }","}"],"fileType":"swift"},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-4-Postgres#Setup-a-Postgres-repository":{"url":"\/tutorials\/hummingbird\/todos-4-postgres#Setup-a-Postgres-repository","type":"section","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-4-Postgres#Setup-a-Postgres-repository","kind":"section","abstract":[{"text":"Now we have a working API and a way to test it, lets look into storing our todos in a Postgres database with PostgresNIO.","type":"text"}],"role":"pseudoSymbol","title":"Setup a Postgres repository"},"todos-api-07.swift":{"syntax":"swift","type":"file","content":["import Hummingbird","","struct TodoController<Context: HBRequestContext, Repository: TodoRepository> {","    \/\/ Todo repository","    let repository: Repository","","    \/\/ add Todos API to router group","    func addRoutes(to group: HBRouterGroup<Context>) {","    }","}"],"fileName":"TodoController.swift","highlights":[],"fileType":"swift","identifier":"todos-api-07.swift"},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-3-Testing#Test-you-application":{"type":"section","kind":"section","title":"Test you application","role":"pseudoSymbol","url":"\/tutorials\/hummingbird\/todos-3-testing#Test-you-application","abstract":[{"text":"Test your application using the HummingbirdXCT framework","type":"text"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-3-Testing#Test-you-application"},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-4-Postgres":{"type":"topic","kind":"project","title":"Use PostgresNIO to store your Todos in a Postgres database","estimatedTime":"20min","role":"project","url":"\/tutorials\/hummingbird\/todos-4-postgres","abstract":[{"text":"Now we have a working API and a way to test it, lets look into storing our todos in a Postgres database with PostgresNIO.","type":"text"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-4-Postgres"},"todos-api-24.sh":{"syntax":"","type":"file","content":["> curl -i -X DELETE http:\/\/localhost:8080\/todos\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253 ","HTTP\/1.1 200 OK","Content-Length: 0","Date: Sat, 6 Jan 2024 11:51:47 GMT","","> curl -i http:\/\/localhost:8080\/todos\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253 ","HTTP\/1.1 204 No Content","Date: Sat, 6 Jan 2024 11:51:59 GMT","","> curl -i -X DELETE http:\/\/localhost:8080\/todos\/                                    ","HTTP\/1.1 200 OK","Content-Length: 0","Date: Sat, 6 Jan 2024 11:52:19 GMT"],"fileName":"Test delete","highlights":[{"line":9},{"line":10},{"line":11},{"line":12},{"line":13}],"fileType":"","identifier":"todos-api-24.sh"},"todos-api-01.swift":{"identifier":"todos-api-01.swift","content":["import Hummingbird","","struct TodoController<Context: HBRequestContext> {","    \/\/ add Todos API to router group","    func addRoutes(to group: HBRouterGroup<Context>) {","    }","}"],"highlights":[],"type":"file","fileName":"TodoController.swift","fileType":"swift","syntax":"swift"},"doc://com.opticalaberration.hummingbird/tutorials/Todos/API-Setup":{"identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/API-Setup","title":"API Setup","type":"topic","role":"article","abstract":[],"url":"\/tutorials\/todos\/api-setup","kind":"article"},"todos-api-05.swift":{"highlights":[],"fileName":"TodoRepository.swift","syntax":"swift","type":"file","identifier":"todos-api-05.swift","content":["import Foundation","","\/\/\/ Interface for storing and editing todos","protocol TodoRepository {","    \/\/\/ Create todo.","    func create(title: String, order: Int?, urlPrefix: String) async throws -> Todo","    \/\/\/ Get todo","    func get(id: UUID) async throws -> Todo?","    \/\/\/ List all todos","    func list() async throws -> [Todo]","    \/\/\/ Update todo. Returns updated todo if successful","    func update(id: UUID, title: String?, order: Int?, completed: Bool?) async throws -> Todo?","    \/\/\/ Delete todo. Returns true if successful","    func delete(id: UUID) async throws -> Bool","    \/\/\/ Delete all todos","    func deleteAll() async throws","}"],"fileType":"swift"},"todos-api-19.sh":{"identifier":"todos-api-19.sh","content":["> curl -i -X POST localhost:8080\/todos -d'{\"title\": \"Wash my hair\"}'  ","HTTP\/1.1 201 Created","Content-Type: application\/json; charset=utf-8","Content-Length: 163","Date: Sat, 6 Jan 2024 11:48:06 GMT","","{\"completed\":false,\"title\":\"Wash my hair\",\"id\":\"7BDECA4F-3A8A-49AC-A83C-5F1C6E181253\",\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253\"}","","> curl -i -X POST localhost:8080\/todos -d'{\"title\": \"Brush my teeth\"}'","HTTP\/1.1 201 Created","Content-Type: application\/json; charset=utf-8","Content-Length: 165","Date: Sat, 6 Jan 2024 11:48:11 GMT","","{\"id\":\"31B0FCCA-F084-4EB6-BCEF-002A00077549\",\"title\":\"Brush my teeth\",\"completed\":false,\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/31B0FCCA-F084-4EB6-BCEF-002A00077549\"}","","> curl -i http:\/\/localhost:8080\/todos\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253 ","HTTP\/1.1 200 OK","Content-Type: application\/json; charset=utf-8","Content-Length: 163","Date: Sat, 6 Jan 2024 11:48:43 GMT","","{\"id\":\"7BDECA4F-3A8A-49AC-A83C-5F1C6E181253\",\"title\":\"Wash my hair\",\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253\",\"completed\":false}"],"highlights":[{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23}],"type":"file","fileName":"Test create and get","fileType":"","syntax":""},"todos-api-08.swift":{"type":"file","fileName":"Todos.swift","identifier":"todos-api-08.swift","syntax":"swift","highlights":[{"line":24}],"content":["import ArgumentParser","import Hummingbird","","@main","struct Todos: AsyncParsableCommand {","    @Option(name: .shortAndLong)","    var hostname: String = \"127.0.0.1\"","","    @Option(name: .shortAndLong)","    var port: Int = 8080","","    func run() async throws {","        var logger = Logger(label: \"Todos\")","        logger.logLevel = .debug","        \/\/ create router","        let router = HBRouter(context: TodoRequestContext.self)","        \/\/ add logging middleware","        router.middlewares.add(HBLogRequestsMiddleware(.info))","        \/\/ add hello route","        router.get(\"\/\") { request, context in","            \"Hello\\n\"","        }","        \/\/ add Todos API","        TodoController(repository: TodoMemoryRepository()).addRoutes(to: router.group(\"todos\"))","        \/\/ create application","        let app = HBApplication(","            router: router,","            configuration: .init(address: .hostname(self.hostname, port: self.port))","        )","        \/\/ run application","        try await app.runService()","    }","}"],"fileType":"swift"},"todos-api-04.swift":{"syntax":"swift","highlights":[{"line":2},{"line":16},{"line":17}],"fileName":"Todo.swift","identifier":"todos-api-04.swift","type":"file","content":["import Foundation","import Hummingbird","","struct Todo {","    \/\/ Todo ID","    var id: UUID","    \/\/ Title ","    var title: String","    \/\/ Order number","    var order: Int?","    \/\/ URL to get this ToDo","    var url: String","    \/\/ Is Todo complete","    var completed: Bool?","}","","extension Todo: HBResponseEncodable, Decodable, Equatable {}"],"fileType":"swift"},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-3-Testing":{"kind":"project","estimatedTime":"15min","type":"topic","url":"\/tutorials\/hummingbird\/todos-3-testing","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-3-Testing","abstract":[{"text":"Test your application using the HummingbirdXCT framework","type":"text"}],"role":"project","title":"Testing your application"},"todos-api-09.swift":{"fileName":"TodoController.swift","syntax":"swift","identifier":"todos-api-09.swift","content":["import Foundation","import Hummingbird","","struct TodoController<Context: HBRequestContext, Repository: TodoRepository> {","    \/\/ Todo repository","    let repository: Repository","","    \/\/ add Todos API to router group","    func addRoutes(to group: HBRouterGroup<Context>) {","        group","            .get(\":id\", use: get)","    }","","    \/\/\/ Get todo entrypoint","    @Sendable func get(request: HBRequest, context: Context) async throws -> Todo? {","        let id = try context.parameters.require(\"id\")","        guard let uuid = UUID(uuidString: id) else { throw HBHTTPError(.badRequest) }","        return try await self.repository.get(id: uuid)","    }","}"],"type":"file","fileType":"swift","highlights":[]},"doc://com.opticalaberration.hummingbird/tutorials/Todos/Testing-your-application":{"kind":"article","type":"topic","url":"\/tutorials\/todos\/testing-your-application","identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/Testing-your-application","abstract":[],"role":"article","title":"Testing your application"},"todos-api-15.swift":{"fileName":"TodoController.swift","syntax":"swift","identifier":"todos-api-15.swift","content":["import Foundation","import Hummingbird","","struct TodoController<Context: HBRequestContext, Repository: TodoRepository> {","    \/\/ Todo repository","    let repository: Repository","","    \/\/ add Todos API to router group","    func addRoutes(to group: HBRouterGroup<Context>) {","        group","            .get(\":id\", use: get)","            .get(use: list)","            .post(use: create)","            .patch(\":id\", use: update)","    }","","    struct UpdateRequest: Decodable {","        let title: String?","        let order: Int?","        let completed: Bool?","    }","    \/\/\/ Update todo entrypoint","    @Sendable func update(request: HBRequest, context: Context) async throws -> Todo? {","        let id = try context.parameters.require(\"id\")","        guard let uuid = UUID(uuidString: id) else { throw HBHTTPError(.badRequest) }","        let request = try await request.decode(as: UpdateRequest.self, using: context)","        guard let todo = try await self.repository.update(","            id: uuid, ","            title: request.title, ","            order: request.order, ","            completed: request.completed","        ) else {","            throw HBHTTPError(.badRequest)","        }","        return todo","    }","","    \/\/\/ Get todo entrypoint","    @Sendable func get(request: HBRequest, context: Context) async throws -> Todo? {","        let id = try context.parameters.require(\"id\")","        guard let uuid = UUID(uuidString: id) else { throw HBHTTPError(.badRequest) }","        return try await self.repository.get(id: uuid)","    }","","    \/\/\/ Get list of todos entrypoint","    @Sendable func list(request: HBRequest, context: Context) async throws -> [Todo] {","        return try await self.repository.list()","    }","","    struct CreateRequest: Decodable {","        let title: String","        let order: Int?","    }","    \/\/\/ Create todo entrypoint","    @Sendable func create(request: HBRequest, context: Context) async throws -> HBEditedResponse<Todo> {","        let request = try await request.decode(as: CreateRequest.self, using: context)","        let todo = try await self.repository.create(title: request.title, order: request.order, urlPrefix: \"http:\/\/localhost:8080\/todos\/\")","        return HBEditedResponse(status: .created, response: todo)","    }","}"],"type":"file","fileType":"swift","highlights":[{"line":14},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":29},{"line":30},{"line":31},{"line":32},{"line":33},{"line":34},{"line":35},{"line":36},{"line":37}]},"https://www.todobackend.com":{"type":"link","title":"Todo-Backend","url":"https:\/\/www.todobackend.com","titleInlineContent":[{"text":"Todo-Backend","type":"text"}],"identifier":"https:\/\/www.todobackend.com"},"todos-extend-06.swift":{"type":"file","fileName":"Todos.swift","identifier":"todos-extend-06.swift","syntax":"swift","highlights":[],"content":["import ArgumentParser","import Hummingbird","","@main","struct Todos: AsyncParsableCommand {","    @Option(name: .shortAndLong)","    var hostname: String = \"127.0.0.1\"","","    @Option(name: .shortAndLong)","    var port: Int = 8080","","    func run() async throws {","        var logger = Logger(label: \"Todos\")","        logger.logLevel = .debug","        \/\/ create router","        let router = HBRouter(context: TodoRequestContext.self)","        \/\/ add logging middleware","        router.middlewares.add(HBLogRequestsMiddleware(.info))","        \/\/ add hello route","        router.get(\"\/\") { request, context in","            \"Hello\\n\"","        }","        \/\/ create application","        let app = HBApplication(router: router, logger: logger)","        \/\/ run application","        try await app.runService()","    }","}"],"fileType":"swift"},"todos-api-21.sh":{"highlights":[{"line":8},{"line":9},{"line":10},{"line":11},{"line":12},{"line":13},{"line":14},{"line":15},{"line":16}],"fileName":"Test update","syntax":"","type":"file","identifier":"todos-api-21.sh","content":["> curl -i -X PATCH http:\/\/localhost:8080\/todos\/31B0FCCA-F084-4EB6-BCEF-002A00077549 -d '{\"completed\": true}'","HTTP\/1.1 200 OK","Content-Type: application\/json; charset=utf-8","Content-Length: 164","Date: Sat, 6 Jan 2024 11:50:01 GMT","","{\"title\":\"Brush my teeth\",\"completed\":true,\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/31B0FCCA-F084-4EB6-BCEF-002A00077549\",\"id\":\"31B0FCCA-F084-4EB6-BCEF-002A00077549\"}","","> curl -i http:\/\/localhost:8080\/todos\/","HTTP\/1.1 200 OK","Content-Type: application\/json; charset=utf-8","Content-Length: 330","Date: Sat, 6 Jan 2024 11:50:26 GMT","","[{\"completed\":true,\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/31B0FCCA-F084-4EB6-BCEF-002A00077549\",\"id\":\"31B0FCCA-F084-4EB6-BCEF-002A00077549\",\"title\":\"Brush my teeth\"},{\"completed\":false,\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/7BDECA4F-3A8A-49AC-A83C-5F1C6E181253\",\"title\":\"Wash my hair\",\"id\":\"7BDECA4F-3A8A-49AC-A83C-5F1C6E181253\"}]",""],"fileType":""},"todos-api-13.sh":{"identifier":"todos-api-13.sh","content":["> curl http:\/\/localhost:8080\/todos\/284DC153-4FE9-458D-8A93-6CB60990B2F3","{\"completed\":false,\"title\":\"Read chapter on testing applications\",\"url\":\"http:\\\/\\\/localhost:8080\\\/todos\\\/284DC153-4FE9-458D-8A93-6CB60990B2F3\",\"id\":\"284DC153-4FE9-458D-8A93-6CB60990B2F3\"}"],"highlights":[],"type":"file","fileName":"Test get","fileType":"","syntax":""},"todos-api-02.swift":{"syntax":"swift","highlights":[],"fileName":"Todos.swift","identifier":"todos-api-02.swift","type":"file","content":["import ArgumentParser","import Hummingbird","","@main","struct Todos: AsyncParsableCommand {","    @Option(name: .shortAndLong)","    var hostname: String = \"127.0.0.1\"","","    @Option(name: .shortAndLong)","    var port: Int = 8080","","    func run() async throws {","        var logger = Logger(label: \"Todos\")","        logger.logLevel = .debug","        \/\/ create router","        let router = HBRouter(context: TodoRequestContext.self)","        \/\/ add logging middleware","        router.middlewares.add(HBLogRequestsMiddleware(.info))","        \/\/ add hello route","        router.get(\"\/\") { request, context in","            \"Hello\\n\"","        }","        \/\/ add Todos API","        TodoController().addRoutes(to: router.group(\"todos\"))","        \/\/ create application","        let app = HBApplication(","            router: router,","            configuration: .init(address: .hostname(self.hostname, port: self.port))","        )","        \/\/ run application","        try await app.runService()","    }","}"],"fileType":"swift"},"doc://com.opticalaberration.hummingbird/tutorials/Todos/Application-setup":{"identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Todos\/Application-setup","abstract":[],"title":"Application setup","role":"article","kind":"article","type":"topic","url":"\/tutorials\/todos\/application-setup"},"doc://com.opticalaberration.hummingbird/tutorials/Hummingbird/Todos-1-Setup#Extend-your-Application":{"identifier":"doc:\/\/com.opticalaberration.hummingbird\/tutorials\/Hummingbird\/Todos-1-Setup#Extend-your-Application","abstract":[{"text":"Create a simple web application.","type":"text"}],"title":"Extend your Application","role":"pseudoSymbol","kind":"section","type":"section","url":"\/tutorials\/hummingbird\/todos-1-setup#Extend-your-Application"}}}