{"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"withSpan"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"Return"},{"kind":"text","text":">("},{"kind":"externalParam","text":"_"},{"kind":"text","text":" "},{"kind":"internalParam","text":"operationName"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"kind":"externalParam","text":"ofKind"},{"kind":"text","text":" "},{"kind":"internalParam","text":"kind"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"SpanKind","preciseIdentifier":"s:7Tracing8SpanKindO"},{"kind":"text","text":" = .internal, "},{"kind":"externalParam","text":"_"},{"kind":"text","text":" "},{"kind":"internalParam","text":"operation"},{"kind":"text","text":": ("},{"kind":"typeIdentifier","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/HBRequest","preciseIdentifier":"s:11Hummingbird9HBRequestV","text":"HBRequest"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Span","preciseIdentifier":"s:7Tracing4SpanP"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"Return"},{"kind":"text","text":") "},{"kind":"keyword","text":"rethrows"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"Return"}],"languages":["swift"],"platforms":["macOS"]}]},{"kind":"parameters","parameters":[{"name":"operationName","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The name of the operation being traced. This may be a handler function, database call, …"}]}]},{"name":"kind","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"The "},{"type":"codeVoice","code":"SpanKind"},{"type":"text","text":" of the "},{"type":"codeVoice","code":"Span"},{"type":"text","text":" to be created. Defaults to "},{"type":"codeVoice","code":"SpanKind\/internal"},{"type":"text","text":"."}]}]},{"name":"operation","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"operation to wrap in a span start\/end and execute immediately"}]}]}]},{"kind":"content","content":[{"anchor":"return-value","level":2,"type":"heading","text":"Return Value"},{"type":"paragraph","inlineContent":[{"type":"text","text":"the value returned by "},{"type":"codeVoice","code":"operation"}]}]},{"kind":"content","content":[{"anchor":"discussion","level":2,"type":"heading","text":"Discussion"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Calls operation with edited request that includes the serviceContext from span, and the span Be sure to use the"},{"type":"text","text":" "},{"type":"codeVoice","code":"HBRequest"},{"type":"text","text":" passed to the closure as that includes the serviceContext"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"This function should be used when we aren’t inside an async function and serviceContext cannot be propagated"},{"type":"text","text":" "},{"type":"text","text":"via Task local variables. The equivalent async version of this is"},{"type":"text","text":" "},{"type":"codeVoice","code":"InstrumentationSystem.tracer.withSpan(_:ofKind:_)"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"DO NOT "},{"type":"codeVoice","code":"end()"},{"type":"text","text":" the passed in span manually. It will be ended automatically when the "},{"type":"codeVoice","code":"operation"},{"type":"text","text":" returns."}]},{"style":"note","content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"the error the "},{"type":"codeVoice","code":"operation"},{"type":"text","text":" has thrown (if any)"}]}],"type":"aside","name":"Throws"}]}],"schemaVersion":{"major":0,"minor":3,"patch":0},"sections":[],"variants":[{"paths":["\/documentation\/hummingbird\/hbrequest\/withspan(_:ofkind:_:)-4bxhf"],"traits":[{"interfaceLanguage":"swift"}]}],"identifier":{"url":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/HBRequest\/withSpan(_:ofKind:_:)-4bxhf","interfaceLanguage":"swift"},"abstract":[{"type":"text","text":"Execute the given operation within a newly created "},{"type":"codeVoice","code":"Span"}],"kind":"symbol","metadata":{"modules":[{"name":"HummingbirdAuth"}],"role":"symbol","title":"withSpan(_:ofKind:_:)","roleHeading":"Instance Method","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"withSpan"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"Return"},{"kind":"text","text":">("},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"kind":"externalParam","text":"ofKind"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"SpanKind","preciseIdentifier":"s:7Tracing8SpanKindO"},{"kind":"text","text":", ("},{"kind":"typeIdentifier","text":"HBRequest","preciseIdentifier":"s:11Hummingbird9HBRequestV"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Span","preciseIdentifier":"s:7Tracing4SpanP"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"Return"},{"kind":"text","text":") "},{"kind":"keyword","text":"rethrows"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"Return"}],"symbolKind":"method","externalID":"s:11Hummingbird9HBRequestV8withSpan_6ofKind_xSS_7Tracing0dF0OxAC_AF0D0_ptKXEtKlF","extendedModule":"Hummingbird","platforms":[{"beta":false,"unavailable":false,"name":"iOS","introducedAt":"13.0","deprecated":false},{"beta":false,"unavailable":false,"name":"macOS","introducedAt":"10.15","deprecated":false},{"beta":false,"unavailable":false,"name":"tvOS","introducedAt":"13.0","deprecated":false},{"beta":false,"unavailable":false,"name":"watchOS","introducedAt":"6.0","deprecated":false}]},"hierarchy":{"paths":[["doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird","doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/HBRequest"]]},"references":{"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/HBRequest/withSpan(_:ofKind:_:)-4bxhf":{"role":"symbol","title":"withSpan(_:ofKind:_:)","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"withSpan"},{"kind":"text","text":"<"},{"kind":"genericParameter","text":"Return"},{"kind":"text","text":">("},{"kind":"typeIdentifier","text":"String","preciseIdentifier":"s:SS"},{"kind":"text","text":", "},{"kind":"externalParam","text":"ofKind"},{"kind":"text","text":": "},{"kind":"typeIdentifier","text":"SpanKind","preciseIdentifier":"s:7Tracing8SpanKindO"},{"kind":"text","text":", ("},{"kind":"typeIdentifier","text":"HBRequest","preciseIdentifier":"s:11Hummingbird9HBRequestV"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Span","preciseIdentifier":"s:7Tracing4SpanP"},{"kind":"text","text":") "},{"kind":"keyword","text":"throws"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"Return"},{"kind":"text","text":") "},{"kind":"keyword","text":"rethrows"},{"kind":"text","text":" -> "},{"kind":"typeIdentifier","text":"Return"}],"abstract":[{"type":"text","text":"Execute the given operation within a newly created "},{"type":"codeVoice","code":"Span"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/HBRequest\/withSpan(_:ofKind:_:)-4bxhf","kind":"symbol","type":"topic","url":"\/documentation\/hummingbird\/hbrequest\/withspan(_:ofkind:_:)-4bxhf"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/HBRequest":{"role":"symbol","title":"HBRequest","fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"HBRequest"}],"abstract":[{"type":"text","text":"Holds all the values required to process a request"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/HBRequest","kind":"symbol","type":"topic","navigatorTitle":[{"kind":"identifier","text":"HBRequest"}],"url":"\/documentation\/hummingbird\/hbrequest"},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird":{"role":"collection","title":"Hummingbird","abstract":[{"type":"text","text":"Lightweight, flexible server framework written in Swift."}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird","kind":"symbol","type":"topic","url":"\/documentation\/hummingbird"}}}