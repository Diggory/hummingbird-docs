{"abstract":[{"type":"text","text":"Add WebSocket upgrade option"}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/HBHTTPServer\/addWebSocketUpgrade(shouldUpgrade:onUpgrade:)"},"kind":"symbol","schemaVersion":{"minor":3,"patch":0,"major":0},"metadata":{"role":"symbol","symbolKind":"method","fragments":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"addWebSocketUpgrade","kind":"identifier"},{"text":"(","kind":"text"},{"text":"shouldUpgrade","kind":"externalParam"},{"text":": (","kind":"text"},{"kind":"typeIdentifier","text":"Channel","preciseIdentifier":"s:7NIOCore7ChannelP"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"HTTPRequestHead","preciseIdentifier":"s:8NIOHTTP115HTTPRequestHeadV"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"EventLoopFuture","preciseIdentifier":"s:7NIOCore15EventLoopFutureC"},{"kind":"text","text":"<"},{"kind":"typeIdentifier","text":"HTTPHeaders","preciseIdentifier":"s:8NIOHTTP111HTTPHeadersV"},{"kind":"text","text":"?>, "},{"kind":"externalParam","text":"onUpgrade"},{"kind":"text","text":": ("},{"kind":"typeIdentifier","preciseIdentifier":"s:17HummingbirdWSCore11HBWebSocketC","text":"HBWebSocket"},{"kind":"text","text":", "},{"kind":"typeIdentifier","preciseIdentifier":"s:8NIOHTTP115HTTPRequestHeadV","text":"HTTPRequestHead"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","preciseIdentifier":"s:s4Voida","text":"Void"},{"kind":"text","text":")"}],"modules":[{"name":"HummingbirdCore"}],"title":"addWebSocketUpgrade(shouldUpgrade:onUpgrade:)","externalID":"s:15HummingbirdCore12HBHTTPServerC0A6WSCoreE19addWebSocketUpgrade06shouldH002onH0y7NIOCore15EventLoopFutureCy8NIOHTTP111HTTPHeadersVSgGAH7Channel_p_AK15HTTPRequestHeadVtc_yAD05HBWebG0C_ARtctF","extendedModule":"HummingbirdCore","roleHeading":"Instance Method"},"variants":[{"paths":["\/documentation\/hummingbirdcore\/hbhttpserver\/addwebsocketupgrade(shouldupgrade:onupgrade:)"],"traits":[{"interfaceLanguage":"swift"}]}],"sections":[],"hierarchy":{"paths":[["doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore","doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/HBHTTPServer"]]},"primaryContentSections":[{"kind":"declarations","declarations":[{"languages":["swift"],"platforms":["Linux"],"tokens":[{"text":"func","kind":"keyword"},{"text":" ","kind":"text"},{"text":"addWebSocketUpgrade","kind":"identifier"},{"text":"(","kind":"text"},{"text":"shouldUpgrade","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"@escaping","kind":"attribute"},{"text":" (","kind":"text"},{"text":"Channel","preciseIdentifier":"s:7NIOCore7ChannelP","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"HTTPRequestHead","preciseIdentifier":"s:8NIOHTTP115HTTPRequestHeadV","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/EventLoopFuture","text":"EventLoopFuture","preciseIdentifier":"s:7NIOCore15EventLoopFutureC","kind":"typeIdentifier"},{"text":"<","kind":"text"},{"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/HTTPHeaders","text":"HTTPHeaders","preciseIdentifier":"s:8NIOHTTP111HTTPHeadersV","kind":"typeIdentifier"},{"text":"?> = { channel, _ in return channel.eventLoop.makeSucceededFuture(HTTPHeaders()) }, ","kind":"text"},{"text":"onUpgrade","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"@escaping","kind":"attribute"},{"text":" (","kind":"text"},{"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdWebSocket\/HBWebSocket","text":"HBWebSocket","preciseIdentifier":"s:17HummingbirdWSCore11HBWebSocketC","kind":"typeIdentifier"},{"text":", ","kind":"text"},{"text":"HTTPRequestHead","preciseIdentifier":"s:8NIOHTTP115HTTPRequestHeadV","kind":"typeIdentifier"},{"text":") -> ","kind":"text"},{"text":"Void","preciseIdentifier":"s:s4Voida","kind":"typeIdentifier"},{"text":")","kind":"text"}]}]},{"kind":"parameters","parameters":[{"content":[{"inlineContent":[{"text":"Closure returning whether upgrade should happen","type":"text"}],"type":"paragraph"}],"name":"shouldUpgrade"},{"content":[{"type":"paragraph","inlineContent":[{"text":"Closure called once upgrade has happened. Includes the ","type":"text"},{"code":"HBWebSocket","type":"codeVoice"},{"text":" created to service the WebSocket connection.","type":"text"}]}],"name":"onUpgrade"}]}],"references":{"doc://com.opticalaberration.hummingbird/documentation/HummingbirdWebSocket/HBWebSocket":{"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdWebSocket\/HBWebSocket","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"HBWebSocket"}],"navigatorTitle":[{"kind":"identifier","text":"HBWebSocket"}],"type":"topic","role":"symbol","kind":"symbol","title":"HBWebSocket","abstract":[{"type":"text","text":"WebSocket object"}],"url":"\/documentation\/hummingbirdwebsocket\/hbwebsocket"},"doc://com.opticalaberration.hummingbird/documentation/HummingbirdCore":{"type":"topic","title":"HummingbirdCore","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore","kind":"symbol","url":"\/documentation\/hummingbirdcore","role":"collection","abstract":[{"type":"text","text":"Swift NIO based HTTP server."}]},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/HTTPHeaders":{"title":"HTTPHeaders","navigatorTitle":[{"kind":"identifier","text":"HTTPHeaders"}],"fragments":[{"kind":"keyword","text":"struct"},{"kind":"text","text":" "},{"kind":"identifier","text":"HTTPHeaders"}],"url":"\/documentation\/hummingbird\/httpheaders","kind":"symbol","type":"topic","identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/HTTPHeaders","role":"symbol","abstract":[{"type":"text","text":"A representation of a block of HTTP header fields."}]},"doc://com.opticalaberration.hummingbird/documentation/Hummingbird/EventLoopFuture":{"type":"topic","navigatorTitle":[{"text":"EventLoopFuture","kind":"identifier"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/Hummingbird\/EventLoopFuture","abstract":[{"type":"text","text":"Holder for a result that will be provided later."}],"fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"text":"EventLoopFuture","kind":"identifier"}],"role":"symbol","title":"EventLoopFuture","url":"\/documentation\/hummingbird\/eventloopfuture","kind":"symbol"},"doc://com.opticalaberration.hummingbird/documentation/HummingbirdCore/HBHTTPServer/addWebSocketUpgrade(shouldUpgrade:onUpgrade:)":{"abstract":[{"type":"text","text":"Add WebSocket upgrade option"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/HBHTTPServer\/addWebSocketUpgrade(shouldUpgrade:onUpgrade:)","url":"\/documentation\/hummingbirdcore\/hbhttpserver\/addwebsocketupgrade(shouldupgrade:onupgrade:)","kind":"symbol","title":"addWebSocketUpgrade(shouldUpgrade:onUpgrade:)","type":"topic","fragments":[{"kind":"keyword","text":"func"},{"kind":"text","text":" "},{"kind":"identifier","text":"addWebSocketUpgrade"},{"kind":"text","text":"("},{"kind":"externalParam","text":"shouldUpgrade"},{"kind":"text","text":": ("},{"preciseIdentifier":"s:7NIOCore7ChannelP","kind":"typeIdentifier","text":"Channel"},{"kind":"text","text":", "},{"preciseIdentifier":"s:8NIOHTTP115HTTPRequestHeadV","kind":"typeIdentifier","text":"HTTPRequestHead"},{"kind":"text","text":") -> "},{"preciseIdentifier":"s:7NIOCore15EventLoopFutureC","kind":"typeIdentifier","text":"EventLoopFuture"},{"kind":"text","text":"<"},{"preciseIdentifier":"s:8NIOHTTP111HTTPHeadersV","kind":"typeIdentifier","text":"HTTPHeaders"},{"kind":"text","text":"?>, "},{"kind":"externalParam","text":"onUpgrade"},{"kind":"text","text":": ("},{"kind":"typeIdentifier","text":"HBWebSocket","preciseIdentifier":"s:17HummingbirdWSCore11HBWebSocketC"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"HTTPRequestHead","preciseIdentifier":"s:8NIOHTTP115HTTPRequestHeadV"},{"kind":"text","text":") -> "},{"kind":"typeIdentifier","text":"Void","preciseIdentifier":"s:s4Voida"},{"kind":"text","text":")"}],"role":"symbol"},"doc://com.opticalaberration.hummingbird/documentation/HummingbirdCore/HBHTTPServer":{"url":"\/documentation\/hummingbirdcore\/hbhttpserver","role":"symbol","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"HBHTTPServer"}],"type":"topic","kind":"symbol","title":"HBHTTPServer","abstract":[{"type":"text","text":"HTTP server class"}],"navigatorTitle":[{"kind":"identifier","text":"HBHTTPServer"}],"identifier":"doc:\/\/com.opticalaberration.hummingbird\/documentation\/HummingbirdCore\/HBHTTPServer"}}}